# ============================================================
#  i3 config - Gruvbox themed for Custom Kali ISO
# ============================================================

# Mod key = Super (Windows key)
set $mod Mod4

# Font
font pango:DepartureMono Nerd Font 10

# ── Gruvbox Colors ──────────────────────────────────────────
# class                 border  backgr. text    indicator child_border
set $bg         #282828
set $bg1        #3c3836
set $bg2        #504945
set $bg3        #665c54
set $fg         #ebdbb2
set $red        #cc241d
set $green      #98971a
set $yellow     #d79921
set $blue       #458588
set $purple     #b16286
set $aqua       #689d6a
set $orange     #d65d0e

client.focused          $blue   $blue   $fg     $aqua   $blue
client.focused_inactive $bg2    $bg1    $fg     $bg2    $bg2
client.unfocused        $bg1    $bg     $bg3    $bg1    $bg1
client.urgent           $red    $red    $fg     $red    $red
client.placeholder      $bg     $bg     $fg     $bg     $bg
client.background       $bg

# ── Gaps & Borders ──────────────────────────────────────────
default_border pixel 2
default_floating_border pixel 2
gaps inner 8
gaps outer 4
smart_gaps on

# ── Autostart ───────────────────────────────────────────────
exec_always --no-startup-id picom --backend glx --vsync &
exec_always --no-startup-id feh --bg-fill /usr/share/backgrounds/kali-gruvbox.png 2>/dev/null || feh --bg-scale /usr/share/backgrounds/kali-16x9/default 2>/dev/null
exec --no-startup-id dunst &
exec --no-startup-id nm-applet &

# ── Key Bindings ────────────────────────────────────────────

# Terminal
bindsym $mod+Return exec kitty

# Rofi (Win+D)
bindsym $mod+d exec rofi -show drun -theme gruvbox-dark

# Kill focused window
bindsym $mod+Shift+q kill

# Change focus (vim-like)
bindsym $mod+h focus left
bindsym $mod+j focus down
bindsym $mod+k focus up
bindsym $mod+l focus right

# Arrow key focus
bindsym $mod+Left  focus left
bindsym $mod+Down  focus down
bindsym $mod+Up    focus up
bindsym $mod+Right focus right

# Move focused window (vim-like)
bindsym $mod+Shift+h move left
bindsym $mod+Shift+j move down
bindsym $mod+Shift+k move up
bindsym $mod+Shift+l move right

# Arrow key move
bindsym $mod+Shift+Left  move left
bindsym $mod+Shift+Down  move down
bindsym $mod+Shift+Up    move up
bindsym $mod+Shift+Right move right

# Split orientation
bindsym $mod+b split h
bindsym $mod+v split v

# Fullscreen
bindsym $mod+f fullscreen toggle

# Layout
bindsym $mod+s layout stacking
bindsym $mod+w layout tabbed
bindsym $mod+e layout toggle split

# Float toggle
bindsym $mod+Shift+space floating toggle
bindsym $mod+space focus mode_toggle

# Parent/child
bindsym $mod+a focus parent

# Scratchpad
bindsym $mod+Shift+minus move scratchpad
bindsym $mod+minus scratchpad show

# ── Workspaces ──────────────────────────────────────────────
set $ws1 "1"
set $ws2 "2"
set $ws3 "3"
set $ws4 "4"
set $ws5 "5"
set $ws6 "6"
set $ws7 "7"
set $ws8 "8"
set $ws9 "9"
set $ws10 "10"

bindsym $mod+1 workspace $ws1
bindsym $mod+2 workspace $ws2
bindsym $mod+3 workspace $ws3
bindsym $mod+4 workspace $ws4
bindsym $mod+5 workspace $ws5
bindsym $mod+6 workspace $ws6
bindsym $mod+7 workspace $ws7
bindsym $mod+8 workspace $ws8
bindsym $mod+9 workspace $ws9
bindsym $mod+0 workspace $ws10

bindsym $mod+Shift+1 move container to workspace $ws1
bindsym $mod+Shift+2 move container to workspace $ws2
bindsym $mod+Shift+3 move container to workspace $ws3
bindsym $mod+Shift+4 move container to workspace $ws4
bindsym $mod+Shift+5 move container to workspace $ws5
bindsym $mod+Shift+6 move container to workspace $ws6
bindsym $mod+Shift+7 move container to workspace $ws7
bindsym $mod+Shift+8 move container to workspace $ws8
bindsym $mod+Shift+9 move container to workspace $ws9
bindsym $mod+Shift+0 move container to workspace $ws10

# ── Resize Mode ─────────────────────────────────────────────
mode "resize" {
    bindsym h resize shrink width 5 px or 5 ppt
    bindsym j resize grow height 5 px or 5 ppt
    bindsym k resize shrink height 5 px or 5 ppt
    bindsym l resize grow width 5 px or 5 ppt

    bindsym Left  resize shrink width 5 px or 5 ppt
    bindsym Down  resize grow height 5 px or 5 ppt
    bindsym Up    resize shrink height 5 px or 5 ppt
    bindsym Right resize grow width 5 px or 5 ppt

    bindsym Return mode "default"
    bindsym Escape mode "default"
    bindsym $mod+r mode "default"
}
bindsym $mod+r mode "resize"

# ── System Controls ─────────────────────────────────────────
# Lock screen
bindsym $mod+Shift+x exec i3lock -c 282828

# Screenshots
bindsym Print exec --no-startup-id scrot ~/Pictures/screenshot_%Y%m%d_%H%M%S.png

# Volume
bindsym XF86AudioRaiseVolume exec --no-startup-id pactl set-sink-volume @DEFAULT_SINK@ +5%
bindsym XF86AudioLowerVolume exec --no-startup-id pactl set-sink-volume @DEFAULT_SINK@ -5%
bindsym XF86AudioMute exec --no-startup-id pactl set-sink-mute @DEFAULT_SINK@ toggle

# Brightness
bindsym XF86MonBrightnessUp exec --no-startup-id brightnessctl set +5%
bindsym XF86MonBrightnessDown exec --no-startup-id brightnessctl set 5%-

# Restart / Exit
bindsym $mod+Shift+c reload
bindsym $mod+Shift+r restart
bindsym $mod+Shift+e exec "i3-nagbar -t warning -m 'Exit i3?' -B 'Yes' 'i3-msg exit'"

# ── i3bar with i3blocks ─────────────────────────────────────
bar {
    status_command i3blocks
    position top
    font pango:DepartureMono Nerd Font 9

    colors {
        background $bg
        statusline $fg
        separator  $bg3

        # class            border  backgr. text
        focused_workspace  $blue   $blue   $bg
        active_workspace   $bg2    $bg1    $fg
        inactive_workspace $bg1    $bg     $bg3
        urgent_workspace   $red    $red    $fg
        binding_mode       $orange $orange $bg
    }
}
